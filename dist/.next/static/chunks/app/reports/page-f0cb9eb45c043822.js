(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{8737:(e,t,a)=>{Promise.resolve().then(a.bind(a,79680))},79680:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(95155),r=a(12115),l=a(83540),n=a(3401),i=a(96025),d=a(16238),c=a(94517),o=a(83394),h=a(8782),x=a(34e3),m=a(54811),u=a(24026);let f=["#8884d8","#82ca9d","#ffc658","#ff8042","#00C49F","#FFBB28","#FF8042"];function j(){let[e,t]=(0,r.useState)([]),[a,j]=(0,r.useState)(!0);(0,r.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await fetch("/api/orders"),a=await e.json();t(a),j(!1)}catch(e){}},b=()=>{let t={};return e.forEach(e=>{t[e.status]=(t[e.status]||0)+1}),Object.entries(t).map(e=>{let[t,a]=e;return{name:t,value:a}})},y=e.reduce((e,t)=>e+(t.totalAmount||0),0),p={};e.forEach(e=>{e.items.forEach(e=>{p[e.product.name]=(p[e.product.name]||0)+e.quantity})});let N=Object.entries(p).map(e=>{let[t,a]=e;return{name:t,quantity:a}}).sort((e,t)=>t.quantity-e.quantity).slice(0,5);return a?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Raporlar & Grafikler"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"G\xfcnl\xfck Sipariş Sayısı (Son 7 G\xfcn)"}),(0,s.jsx)(l.u,{width:"100%",height:250,children:(0,s.jsxs)(n.E,{data:(()=>{let t={},a=new Date;for(let e=6;e>=0;e--){let s=new Date(a);s.setDate(a.getDate()-e),t[s.toLocaleDateString("tr-TR")]=0}return e.forEach(e=>{let a=new Date(e.createdAt).toLocaleDateString("tr-TR");void 0!==t[a]&&t[a]++}),Object.entries(t).map(e=>{let[t,a]=e;return{date:t,count:a}})})(),children:[(0,s.jsx)(i.W,{dataKey:"date",stroke:"#fff"}),(0,s.jsx)(d.h,{stroke:"#fff",allowDecimals:!1}),(0,s.jsx)(c.m,{}),(0,s.jsx)(o.y,{dataKey:"count",fill:"#8884d8"})]})})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\xdcretim Durumu Dağılımı"}),(0,s.jsx)(l.u,{width:"100%",height:250,children:(0,s.jsxs)(h.r,{children:[(0,s.jsx)(x.F,{data:b(),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:b().map((e,t)=>(0,s.jsx)(m.f,{fill:f[t%f.length]},"cell-".concat(t)))}),(0,s.jsx)(c.m,{}),(0,s.jsx)(u.s,{})]})})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Toplam Ciro"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-green-400",children:[y.toLocaleString("tr-TR")," TL"]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"En \xc7ok Sipariş Edilen \xdcr\xfcnler"}),(0,s.jsx)(l.u,{width:"100%",height:250,children:(0,s.jsxs)(n.E,{data:N,layout:"vertical",children:[(0,s.jsx)(i.W,{type:"number",stroke:"#fff",allowDecimals:!1}),(0,s.jsx)(d.h,{dataKey:"name",type:"category",stroke:"#fff"}),(0,s.jsx)(c.m,{}),(0,s.jsx)(o.y,{dataKey:"quantity",fill:"#82ca9d"})]})})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[279,441,684,358],()=>t(8737)),_N_E=e.O()}]);