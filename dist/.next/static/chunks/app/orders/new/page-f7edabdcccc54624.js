(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171],{29353:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var a=t(95155),s=t(12115),d=t(35695),l=t(56104),n=t(35317);function i(){let[e,r]=(0,s.useState)([]),[t,i]=(0,s.useState)([]),[o,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[b,p]=(0,s.useState)(""),[x,g]=(0,s.useState)(!0),h=(0,d.useRouter)();(0,s.useEffect)(()=>{y()},[]);let y=async()=>{try{let e=await fetch("/api/products"),t=await e.json();r(t),g(!1)}catch(e){console.error("\xdcr\xfcnler alınamadı:",e),g(!1)}},f=e=>{t.find(r=>r.productId===e.id)?i(t.map(r=>r.productId===e.id?{...r,quantity:r.quantity+1}:r)):i([...t,{productId:e.id,quantity:1,price:e.price}])},j=e=>{i(t.filter(r=>r.productId!==e))},N=(e,r)=>{r<1||i(t.map(t=>t.productId===e?{...t,quantity:r}:t))},v=()=>t.reduce((e,r)=>e+r.price*r.quantity,0),S=async e=>{e.preventDefault();try{let e=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:"1",items:t,totalAmount:v(),deliveryDate:o,deliveryAddress:u,notes:b})});if(e.ok){let r=await e.json();await (0,n.gS)((0,n.rJ)(l.db,"orders"),{...r,createdAt:new Date}),h.push("/dashboard")}}catch(e){console.error("Sipariş oluşturulamadı:",e)}};return x?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Yeni Sipariş"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\xdcr\xfcnler"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 cursor-pointer hover:bg-gray-700 transition duration-300",onClick:()=>f(e),children:[(0,a.jsx)("h3",{className:"font-bold",children:e.name}),(0,a.jsxs)("p",{className:"text-gray-400",children:[e.price.toLocaleString("tr-TR")," TL"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.category})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Sipariş Detayları"}),(0,a.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Teslimat Tarihi"}),(0,a.jsx)("input",{type:"date",value:o,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Teslimat Adresi"}),(0,a.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",rows:3,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Notlar"}),(0,a.jsx)("textarea",{value:b,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",rows:3})]}),(0,a.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,a.jsx)("h3",{className:"font-bold mb-4",children:"Se\xe7ilen \xdcr\xfcnler"}),t.map(r=>{let t=e.find(e=>e.id===r.productId);return(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:null==t?void 0:t.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:[r.price.toLocaleString("tr-TR")," TL x ",r.quantity]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>N(r.productId,r.quantity-1),className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",children:"-"}),(0,a.jsx)("span",{children:r.quantity}),(0,a.jsx)("button",{type:"button",onClick:()=>N(r.productId,r.quantity+1),className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",children:"+"}),(0,a.jsx)("button",{type:"button",onClick:()=>j(r.productId),className:"px-2 py-1 bg-red-600 rounded hover:bg-red-700",children:"Sil"})]})]},r.productId)}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:(0,a.jsxs)("p",{className:"text-xl font-bold",children:["Toplam: ",v().toLocaleString("tr-TR")," TL"]})})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300",disabled:0===t.length,children:"Siparişi Oluştur"})]})]})]})]})})}},31690:(e,r,t)=>{Promise.resolve().then(t.bind(t,29353))},35695:(e,r,t)=>{"use strict";var a=t(18999);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},56104:(e,r,t)=>{"use strict";let a;t.d(r,{db:()=>o,j2:()=>c,zS:()=>a});var s=t(23915),d=t(86864),l=t(35317),n=t(16203);let i=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyAJVw7940Ayc0lposv8dNNVnu5xvUqeNDs",authDomain:"kuta-f02d2.firebaseapp.com",projectId:"kuta-f02d2",storageBucket:"kuta-f02d2.appspot.com",messagingSenderId:"1065370220535",appId:"1:1065370220535:web:487336f7220d083a0720f2",measurementId:"G-2TZXB8XSJP"});(0,d.TT)().then(e=>{e&&(a=(0,d.P5)(i))});let o=(0,l.aU)(i),c=(0,n.xI)(i)}},e=>{var r=r=>e(e.s=r);e.O(0,[992,163,566,441,684,358],()=>r(31690)),_N_E=e.O()}]);