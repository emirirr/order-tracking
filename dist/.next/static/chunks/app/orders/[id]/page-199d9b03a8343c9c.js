(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{12810:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(95155),r=t(12115),l=t(35695),i=t(59576);function d(){let e=(0,l.useParams)(),s=(0,l.useRouter)(),{user:t}=(0,i.A)(),[d,n]=(0,r.useState)(null),[c,o]=(0,r.useState)(!0),[u,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{x()},[e.id]);let x=async()=>{try{let s=await fetch("/api/orders/".concat(e.id)),t=await s.json();n(t),o(!1)}catch(e){console.error("Sipariş detayları alınamadı:",e),o(!1)}},h=async e=>{if(d){m(!0);try{(await fetch("/api/production",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:d.id,status:e,startTime:"IN_PROGRESS"===e?new Date().toISOString():void 0,endTime:"COMPLETED"===e?new Date().toISOString():void 0})})).ok&&x()}catch(e){console.error("\xdcretim durumu g\xfcncellenemedi:",e)}m(!1)}};return c?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):d?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Sipariş Detayları"}),(0,a.jsx)("button",{onClick:()=>s.push("/dashboard"),className:"bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded",children:"Geri D\xf6n"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:d.orderNumber}),(0,a.jsx)("p",{className:"text-gray-400",children:d.customer.name})]}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat((e=>{switch(e){case"PENDING":return"bg-yellow-500";case"CONFIRMED":return"bg-blue-500";case"IN_PRODUCTION":return"bg-purple-500";case"READY_FOR_DELIVERY":return"bg-green-500";case"OUT_FOR_DELIVERY":return"bg-indigo-500";case"DELIVERED":default:return"bg-gray-500";case"CANCELLED":return"bg-red-500"}})(d.status)),children:d.status})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400",children:"M\xfcşteri Bilgileri"}),(0,a.jsx)("p",{className:"font-bold",children:d.customer.name}),(0,a.jsx)("p",{className:"text-gray-400",children:d.customer.email}),(0,a.jsx)("p",{className:"text-gray-400",children:d.customer.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400",children:"Teslimat Bilgileri"}),(0,a.jsx)("p",{className:"font-bold",children:new Date(d.deliveryDate).toLocaleDateString("tr-TR")}),(0,a.jsx)("p",{className:"text-gray-400",children:d.deliveryAddress})]}),d.notes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400",children:"Notlar"}),(0,a.jsx)("p",{className:"text-gray-400",children:d.notes})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\xdcr\xfcnler"}),(0,a.jsxs)("div",{className:"space-y-4",children:[d.items.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:e.product.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:[e.price.toLocaleString("tr-TR")," TL x ",e.quantity]})]}),(0,a.jsxs)("p",{className:"font-bold",children:[(e.price*e.quantity).toLocaleString("tr-TR")," TL"]})]},s)),(0,a.jsx)("div",{className:"border-t border-gray-700 pt-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"font-bold",children:"Toplam"}),(0,a.jsxs)("p",{className:"font-bold",children:[d.totalAmount.toLocaleString("tr-TR")," TL"]})]})})]})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\xdcretim Durumu"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400",children:"Durum"}),(0,a.jsx)("p",{className:"font-bold",children:d.production.status})]}),d.production.startTime&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400",children:"Başlangı\xe7"}),(0,a.jsx)("p",{className:"font-bold",children:new Date(d.production.startTime).toLocaleString("tr-TR")})]}),d.production.endTime&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400",children:"Bitiş"}),(0,a.jsx)("p",{className:"font-bold",children:new Date(d.production.endTime).toLocaleString("tr-TR")})]}),d.production.notes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400",children:"Notlar"}),(0,a.jsx)("p",{className:"text-gray-400",children:d.production.notes})]}),(()=>{if(!t||"PRODUCTION_MANAGER"!==t.role&&"ADMIN"!==t.role||!d)return null;let e=d.production.status;return(0,a.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,a.jsx)("h3",{className:"font-bold mb-4",children:"Durum G\xfcncelle"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:["SCHEDULED"===e&&(0,a.jsx)("button",{onClick:()=>h("IN_PROGRESS"),disabled:u,className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50",children:"\xdcretime Al"}),"IN_PROGRESS"===e&&(0,a.jsx)("button",{onClick:()=>h("COMPLETED"),disabled:u,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50",children:"\xdcretimi Tamamla"}),("COMPLETED"===e||"READY_FOR_DELIVERY"===e)&&(0,a.jsx)("button",{onClick:()=>h("OUT_FOR_DELIVERY"),disabled:u,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50",children:"Teslimata \xc7ıkar"}),"OUT_FOR_DELIVERY"===e&&(0,a.jsx)("button",{onClick:()=>h("DELIVERED"),disabled:u,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50",children:"Teslim Edildi"})]})]})})()]})]})})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-red-500",children:"Sipariş bulunamadı"})})}},35695:(e,s,t)=>{"use strict";var a=t(18999);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},56104:(e,s,t)=>{"use strict";let a;t.d(s,{db:()=>c,j2:()=>o,zS:()=>a});var r=t(23915),l=t(86864),i=t(35317),d=t(16203);let n=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyAJVw7940Ayc0lposv8dNNVnu5xvUqeNDs",authDomain:"kuta-f02d2.firebaseapp.com",projectId:"kuta-f02d2",storageBucket:"kuta-f02d2.appspot.com",messagingSenderId:"1065370220535",appId:"1:1065370220535:web:487336f7220d083a0720f2",measurementId:"G-2TZXB8XSJP"});(0,l.TT)().then(e=>{e&&(a=(0,l.P5)(n))});let c=(0,i.aU)(n),o=(0,d.xI)(n)},59576:(e,s,t)=>{"use strict";t.d(s,{A:()=>o,AuthProvider:()=>c});var a=t(95155),r=t(12115),l=t(16203),i=t(56104),d=t(35317);let n=(0,r.createContext)({user:null,loading:!0});function c(e){let{children:s}=e,[t,c]=(0,r.useState)(null),[o,u]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=(0,l.hg)(i.j2,async e=>{if(e){let s=(0,d.P)((0,d.rJ)(i.db,"users"),(0,d._M)("uid","==",e.uid)),t=await (0,d.GG)(s),a=null;t.forEach(s=>{a={uid:e.uid,name:s.data().name,email:s.data().email,role:s.data().role}}),c(a)}else c(null);u(!1)});return()=>e()},[]),(0,a.jsx)(n.Provider,{value:{user:t,loading:o},children:s})}function o(){return(0,r.useContext)(n)}},69867:(e,s,t)=>{Promise.resolve().then(t.bind(t,12810))}},e=>{var s=s=>e(e.s=s);e.O(0,[992,163,566,441,684,358],()=>s(69867)),_N_E=e.O()}]);